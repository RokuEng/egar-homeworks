# Spring Data, Spring Context, Hibernate приложение на банковскую тематику

**Банковское приложение, следующее такой логике:** 

Есть клиент, у клиента есть семья (для глубокого анализа способности к выплате кредита) и его счета. 
Счета бывают: **личные**, **общие** и **кредитные**. Выплаты с кредитного счёта повышают кредитный долг. 
Перевод со счёта на счёт возможен только в том случае если оба счёта имеют **одну и ту же валюту**
(Для перевода меж валютами оставлены шаблонный метод и стратегия, изначально запрещающие подобные переводы).
Для работы с клиентами и счетами есть сервисы.

# Техническое исполнение:

* **Конфигурация** происходит в (пакет `config`), классах `AccountConfig`, `JpaConfig`, `SpringConfig`. Аннотации для конфигурации и бины
распределены по названиям классов конфигураций. 

***

* Для создания **кредитного** и **обычного** аккаунтов используются соответствующие `@Bean @Scope(BeanScope.prototype)`, обёрнутые в 
параметризованные `AccountFactory` для использования их в `ClientService` и `AccountService`.

***

* В проекте используются обычные (пакет `repo.spring`) и кастомные (пакет `repo.custom`) **JPA Репозитории**. 
Интерфейс `interface CustomRepo<E extends Persistent<ID>, ID extends Serializable>` содержит в себе методы для работы с `EntityManager` 
напрямую (описание всех реализованных там методов есть в **README** проекта **Hibernate**, вкратце: работа с EntityManager
происходит с помощью Generic методов всех возможных вариантов (их список есть в самом интерфейсе)). 
Для нужд сервиса был добавлен `interface EagerClientRepo extends CustomRepo<Client, Integer>` с возможностью жадно
выгрузить все поля клиента (предполагается что это нужно не всегда), с реализацией `class EagerClientRepoImpl  implements EagerClientRepo`, 
которая, затем, используется в `ClientService`.

***

* Все `@Entity` и необходимые для них встраиваемые объекты и перечисления находятся в одноимённом пакете. Вынесен 
`@MappedSuperclass` `class Persistent<ID extends Serializable>`, содержащий в себе аудит и ID, тип которого определён
в Generic. 

***

* Применён **Scheduling** (пакет `scheduled`) для начисления процентов по кредиту. Существует это для эмуляции приходящего на контроллер уведомления 
о необходимости начислить проценты. 

***

* Применено **AOP** (пакет `aspect`) для логирования и измерения времени выполнения методов. Для безопасности привязка происходит 
к аннотациям маркерам в том же пакете: `@InterestRateApplyAspect`, `@ProceedTimeAspect`. 
Конкретное применение: логирование Scheduled методов.


